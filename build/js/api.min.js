!function(e){e(function(){e(".entry-content").length&&history.replaceState({id:post_vars.id,slug:post_vars.slug,source:post_vars.source,source_url:post_vars.source_url,content:"<p>"+post_vars.content+"</p>",author:post_vars.title},null,document.location.href),e("#new-quote-button").on("click",function(t){var o=api_vars.root_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1";t.preventDefault(),e.ajax({method:"get",url:o,dataType:"json"}).done(function(t){e(".entry-title").text(t[0].title.rendered),e(".entry-content").html(t[0].content.rendered),t[0]._qod_quote_source&&t[0]._qod_quote_source_url?(e(".source").html("<a>"+t[0]._qod_quote_source+"</a>"),e(".source a").attr("href",t[0]._qod_quote_source_url)):t[0]._qod_quote_source?e(".source").html(t[0]._qod_quote_source):e(".source").html(""),history.pushState({id:t[0].id,slug:t[0].slug,source:t[0]._qod_quote_source,source_url:t[0]._qod_quote_source_url,content:t[0].content.rendered,author:t[0].title.rendered},null,api_vars.home_url+"/"+t[0].slug)}).fail(function(){e(".entry-title").text("QuotesOnDev"),e(".entry-content").html("<p>Oops! Something went wrong. Please try again!</p>\n"),e(".source").html("<a>Take me home!</a>"),e(".source a").attr("href",api_vars.home_url)}).always(function(){})}),window.addEventListener("popstate",function(t){null!==t.state&&t.state.content&&(e(".entry-title").text(t.state.author),e(".entry-content").html(t.state.content),t.state.source&&t.state.source_url?(e(".source").html("<a>"+t.state.source+"</a>"),e(".source a").attr("href",t.state.source_url)):t.state.source?e(".source").html(t.state.source):e(".source").html(""))}),e("#quote-submit").on("click",function(t){t.preventDefault(),e("#quote-author").val()&&e("#quote-content").val()?e.ajax({method:"post",url:api_vars.root_url+"wp/v2/posts/",data:{title:e("#quote-author").val(),content:e("#quote-content").val(),_qod_quote_source:e("#quote-source").val(),_qod_quote_source_url:e("#quote-source-url").val(),status:"publish"},beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",api_vars.nonce)}}).done(function(){e("#quote-author").val(""),e("#quote-content").val(""),e("#quote-source").val(""),e("#quote-source-url").val(""),e(".submit-success-message").text(api_vars.success),e(".submit-success-message").removeClass("fail")}).fail(function(){e(".submit-success-message").text(api_vars.failure),e(".submit-success-message").addClass("fail")}):(e(".submit-success-message").text("Author of Quote and Quote are required fields."),e(".submit-success-message").addClass("fail"))})})}(jQuery);